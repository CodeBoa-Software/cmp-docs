# Estimativa de Horas - Entrega 2

**Projeto:** Casa M√£e Paulistana  
**Entrega:** Sistema de Triagem + WhatsApp + Formul√°rios de Especialistas  
**Data:** Outubro 2025  
**Vers√£o:** 1.0

---

## üìä Resumo Executivo

| Disciplina | Horas | % do Total | Complexidade |
|-----------|-------|------------|--------------|
| **1. An√°lise e Planejamento** | 20h | 11% | M√©dia |
| **2. Setup de Infraestrutura** | 10h | 5% | Baixa-M√©dia |
| **3. Backend Development** | 68h | 36% | Alta |
| **4. Frontend Development** | 52h | 27% | M√©dia-Alta |
| **5. Integra√ß√£o e Testes** | 26h | 14% | Alta |
| **6. Documenta√ß√£o e Deploy** | 14h | 7% | Baixa-M√©dia |
| **TOTAL BASE** | **190h** | **100%** | |

### Margem de Conting√™ncia
```
Horas base: 190h
Margem para imprevistos (+15%): 28h
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL COM MARGEM: 218h
```

**Justificativa da margem:**
- Integra√ß√£o WhatsApp Business API tem complexidade imprevis√≠vel
- M√∫ltiplos formul√°rios de especialistas podem ter requisitos espec√≠ficos
- Fluxos de aprova√ß√£o e notifica√ß√µes podem exigir refinamentos
- Sincroniza√ß√£o entre diferentes m√≥dulos requer aten√ß√£o especial

---

## ‚è±Ô∏è Detalhamento por Disciplina

### 1. An√°lise e Planejamento

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| Refinamento de requisitos (triagem + WhatsApp) | 5h | M√©dia |
| Modelagem de dados (novos schemas) | 4h | M√©dia |
| Defini√ß√£o de fluxos de aprova√ß√£o | 3h | M√©dia |
| Desenho da integra√ß√£o WhatsApp | 4h | M√©dia-Alta |
| Defini√ß√£o de APIs (contratos) | 3h | Baixa |
| Planejamento de testes | 1h | Baixa |

**Subtotal:** 20h

**Justificativa:** Setup reduzido pois arquitetura j√° est√° definida na Entrega 1. Foco em novos m√≥dulos e integra√ß√µes.

---

### 2. Setup de Infraestrutura

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| Configura√ß√£o WhatsApp Business API (provedor) | 4h | M√©dia-Alta |
| Setup de webhooks para WhatsApp | 2h | M√©dia |
| Configura√ß√£o de storage adicional (m√≠dias WhatsApp) | 2h | Baixa |
| Ajustes em Cloud Run (vari√°veis, secrets) | 1h | Baixa |
| Configura√ß√£o Google Forms + Sheets | 1h | Baixa |

**Subtotal:** 10h

**Justificativa:** Infraestrutura base (Cloud Run, DB, Storage) j√° existe. Apenas configura√ß√µes incrementais e integra√ß√£o WhatsApp.

---

### 3. Backend Development (.NET)

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| **M√≥dulo de Libera√ß√£o para Triagem** | | |
| - Models e DTOs (aprova√ß√£o/rejei√ß√£o) | 3h | Baixa |
| - Endpoints de aprova√ß√£o/rejei√ß√£o | 4h | M√©dia |
| - Sistema de notifica√ß√µes (email + WhatsApp) | 5h | M√©dia-Alta |
| - Logs de auditoria (quem aprovou/rejeitou) | 2h | Baixa |
| **Formul√°rio de Triagem** | | |
| - Models e DTOs para triagem | 3h | Baixa |
| - Endpoints CRUD de triagem | 4h | M√©dia |
| - Valida√ß√µes e regras de neg√≥cio | 3h | M√©dia |
| **Integra√ß√£o WhatsApp Business API** | | |
| - Setup cliente WhatsApp (SDK/REST) | 4h | Alta |
| - Webhook handler (recebimento mensagens) | 5h | Alta |
| - Servi√ßo de envio de mensagens | 3h | M√©dia |
| - Download e storage de m√≠dias recebidas | 4h | M√©dia-Alta |
| - Sistema de templates de mensagens | 3h | M√©dia |
| - Vincula√ß√£o de conversas com cadastros | 4h | M√©dia-Alta |
| **Formul√°rios de Especialistas (3 formul√°rios)** | | |
| - Models e schemas (3 formul√°rios √ó 2h) | 6h | Baixa-M√©dia |
| - Endpoints CRUD (3 formul√°rios √ó 3h) | 9h | M√©dia |
| - Valida√ß√µes espec√≠ficas por especialidade | 4h | M√©dia |
| **Testes Unit√°rios** | | |
| - Cobertura 70% dos novos m√≥dulos | 12h | M√©dia |

**Subtotal:** 68h

**Justificativa da complexidade:**
- **WhatsApp API:** Webhook handling, processamento ass√≠ncrono, download de m√≠dias, rate limiting
- **Notifica√ß√µes:** M√∫ltiplos canais (email + WhatsApp), templates, filas
- **Formul√°rios especialistas:** Campos din√¢micos por especialidade, valida√ß√µes espec√≠ficas
- **Aprova√ß√£o/Rejei√ß√£o:** Fluxo de estados, auditoria completa, notifica√ß√µes em cascata

---

### 4. Frontend Development (React)

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| **Painel Administrativo** | | |
| - Dashboard de pr√©-cadastros pendentes | 6h | M√©dia |
| - Visualiza√ß√£o de documentos enviados | 4h | M√©dia |
| - Bot√µes de aprovar/rejeitar com confirma√ß√£o | 3h | Baixa-M√©dia |
| - Filtros e busca | 4h | M√©dia |
| - Sistema de notifica√ß√µes in-app | 3h | M√©dia |
| **Formul√°rio de Triagem** | | |
| - Interface do formul√°rio | 5h | M√©dia |
| - Valida√ß√µes client-side | 2h | Baixa |
| - Integra√ß√£o com API | 2h | Baixa |
| **Interface de An√°lise WhatsApp** | | |
| - Listagem de conversas | 4h | M√©dia |
| - Visualiza√ß√£o de hist√≥rico de mensagens | 4h | M√©dia |
| - Interface para an√°lise de documentos recebidos | 4h | M√©dia |
| - Preview de m√≠dias (fotos/PDFs) | 3h | M√©dia |
| **Formul√°rios de Especialistas (3 formul√°rios)** | | |
| - Interfaces dos formul√°rios (3 √ó 2h) | 6h | M√©dia |
| - Valida√ß√µes e l√≥gica (3 √ó 1h) | 3h | Baixa-M√©dia |
| **Integra√ß√£o e Polimento** | | |
| - Responsividade mobile | 3h | M√©dia |
| - Tratamento de erros e loading states | 2h | Baixa |

**Subtotal:** 52h

**Justificativa da complexidade:**
- **Painel Admin:** M√∫ltiplas funcionalidades integradas, visualiza√ß√£o de documentos, filtros avan√ßados
- **WhatsApp UI:** Hist√≥rico de conversas, preview de m√≠dias, interface tipo chat
- **Formul√°rios especialistas:** Campos espec√≠ficos por especialidade, valida√ß√µes customizadas

---

### 5. Integra√ß√£o e Testes

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| Testes de integra√ß√£o (API + DB) | 6h | M√©dia |
| Testes de integra√ß√£o WhatsApp (envio/recebimento) | 8h | Alta |
| Testes de fluxo completo (aprova√ß√£o ‚Üí notifica√ß√£o) | 4h | M√©dia-Alta |
| Testes E2E (principais fluxos administrativos) | 6h | M√©dia |
| Corre√ß√£o de bugs encontrados | 2h | Vari√°vel |

**Subtotal:** 26h

**Justificativa:** Integra√ß√£o WhatsApp requer testes extensivos de webhooks, processamento ass√≠ncrono e diferentes cen√°rios de falha.

---

### 6. Documenta√ß√£o e Deploy

| Atividade | Horas | Complexidade |
|-----------|-------|--------------|
| Documenta√ß√£o de API (novos endpoints) | 3h | Baixa |
| Guia de configura√ß√£o WhatsApp | 3h | M√©dia |
| Documenta√ß√£o dos formul√°rios de especialistas | 2h | Baixa |
| Runbook de troubleshooting WhatsApp | 2h | M√©dia |
| Deploy em produ√ß√£o | 2h | Baixa-M√©dia |
| Handover e treinamento da equipe | 2h | Baixa |

**Subtotal:** 14h

---

## üë• Perfis de Desenvolvedores Necess√°rios

### Full-Stack Developer (React + .NET)
- Desenvolvimento completo dos m√≥dulos
- Integra√ß√£o WhatsApp Business API
- Painel administrativo
- Formul√°rios de triagem e especialistas
- Testes e documenta√ß√£o
- **100% do projeto = 190h**
- **Taxa hor√°ria:** R$ 200/h

---

## üéØ Distribui√ß√£o de Horas por Fase

### Fase 1: Core Administrativo + WhatsApp

**Prazo:** 3-4 semanas

| Disciplina | Horas |
|-----------|-------|
| An√°lise e Planejamento | 15h |
| Setup de Infraestrutura | 10h |
| Backend Development | 45h |
| Frontend Development | 35h |
| Integra√ß√£o e Testes | 18h |
| Documenta√ß√£o e Deploy | 7h |
| **TOTAL FASE 1** | **130h** |

**Entregas:**
- ‚úÖ Painel administrativo funcional
- ‚úÖ Sistema de aprova√ß√£o/rejei√ß√£o
- ‚úÖ Integra√ß√£o WhatsApp (envio + recebimento)
- ‚úÖ Formul√°rio de triagem
- ‚úÖ An√°lise de documentos via WhatsApp
- ‚úÖ Sistema de notifica√ß√µes

---

### Fase 2: Formul√°rios de Especialistas + Refinamento

**Prazo:** 2-3 semanas

| Disciplina | Horas |
|-----------|-------|
| An√°lise e Planejamento | 5h |
| Backend Development | 23h |
| Frontend Development | 17h |
| Integra√ß√£o e Testes | 8h |
| Documenta√ß√£o e Deploy | 7h |
| **TOTAL FASE 2** | **60h** |

**Entregas:**
- ‚úÖ 3 formul√°rios de especialistas completos
- ‚úÖ Valida√ß√µes espec√≠ficas por especialidade
- ‚úÖ Integra√ß√£o com sistema de triagem
- ‚úÖ Testes E2E completos
- ‚úÖ Documenta√ß√£o finalizada
- ‚úÖ MVP Google Forms + Sheets (se necess√°rio)

---

## üí° Considera√ß√µes e Premissas

### Stack Tecnol√≥gica (Mantida da Entrega 1)
- **Frontend:** React + Vite + TypeScript + Shadcn/UI + Tailwind CSS
- **Backend:** .NET (ASP.NET Core) + Entity Framework + MediatR
- **Banco de Dados:** PostgreSQL (AlloyDB ou Cloud SQL)
- **Storage:** Google Drive API + Cloud Storage
- **Cloud:** Google Cloud Platform (GCP)
- **CI/CD:** GitHub Actions
- **Novo:** WhatsApp Business API (provedor a definir: Twilio, MessageBird, Meta)

### Premissas
- ‚úÖ Infraestrutura da Entrega 1 j√° est√° rodando em produ√ß√£o
- ‚úÖ Stack tecnol√≥gica validada e est√°vel
- ‚úÖ Equipe familiarizada com codebase
- Provedor WhatsApp Business API ser√° contratado
- Requisitos dos formul√°rios de especialistas ser√£o definidos no in√≠cio
- Equipe cliente dispon√≠vel para valida√ß√µes intermedi√°rias

### Novidades vs Entrega 1
- **Redu√ß√£o em Setup:** -66% (30h ‚Üí 10h)
  - Infraestrutura base j√° existe
  - CI/CD j√° configurado
  - Apenas configura√ß√µes incrementais
  
- **Aumento em Backend:** +39% (49h ‚Üí 68h)
  - Integra√ß√£o WhatsApp (complexa)
  - 3 novos formul√°rios de especialistas
  - Sistema de aprova√ß√£o/rejei√ß√£o
  - M√∫ltiplas notifica√ß√µes

- **Aumento em Frontend:** +79% (29h ‚Üí 52h)
  - Painel administrativo completo
  - Interface de an√°lise WhatsApp
  - 3 formul√°rios adicionais
  - Dashboard de gest√£o

### Riscos que Podem Impactar Horas
- **WhatsApp Business API:** Limita√ß√µes de sandbox, rate limiting, webhooks inst√°veis (+15-20h)
- **Requisitos dos formul√°rios de especialistas n√£o finalizados:** Cada mudan√ßa pode adicionar 3-8h por formul√°rio
- **Complexidade do fluxo de aprova√ß√£o:** Regras de neg√≥cio n√£o previstas (+5-10h)
- **Volume de notifica√ß√µes:** Performance e filas podem precisar otimiza√ß√£o (+8-15h)
- **Integra√ß√£o com Google Forms:** Se migra√ß√£o for necess√°ria antes do previsto (+10-20h)

---

## üìÖ Cronograma Estimado

### Timeline Total: 5-7 semanas

```
Semana 1: An√°lise + Setup WhatsApp (25h)
‚îú‚îÄ Refinamento requisitos (15h)
‚îú‚îÄ Configura√ß√£o WhatsApp API (10h)
‚îî‚îÄ Setup webhooks e storage

Semana 2-3: Desenvolvimento Core (70h)
‚îú‚îÄ Backend: Aprova√ß√£o/Rejei√ß√£o + WhatsApp (35h)
‚îú‚îÄ Frontend: Painel Admin + WhatsApp UI (30h)
‚îî‚îÄ Integra√ß√£o b√°sica (5h)

Semana 4: Formul√°rio de Triagem + Testes (35h)
‚îú‚îÄ Backend + Frontend triagem (15h)
‚îú‚îÄ Testes integra√ß√£o WhatsApp (10h)
‚îî‚îÄ Corre√ß√µes e ajustes (10h)

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
FASE 1 COMPLETA - CORE FUNCIONAL (4 semanas = 130h)

Semana 5-6: Formul√°rios de Especialistas (40h)
‚îú‚îÄ Backend: 3 formul√°rios (19h)
‚îú‚îÄ Frontend: 3 formul√°rios (12h)
‚îî‚îÄ Valida√ß√µes espec√≠ficas (9h)

Semana 7: Finaliza√ß√£o + Deploy (20h)
‚îú‚îÄ Testes E2E completos (8h)
‚îú‚îÄ Documenta√ß√£o (7h)
‚îú‚îÄ Deploy e handover (5h)

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
FASE 2 COMPLETA (3 semanas ap√≥s Fase 1 = 60h)
```

---

## üìä Compara√ß√£o com Entrega 1

| M√©trica | Entrega 1 | Entrega 2 | Varia√ß√£o |
|---------|-----------|-----------|----------|
| **Horas Base** | 176h | 190h | +8% |
| **Setup Infraestrutura** | 30h | 10h | -66% ‚¨áÔ∏è |
| **Backend** | 49h | 68h | +39% ‚¨ÜÔ∏è |
| **Frontend** | 29h | 52h | +79% ‚¨ÜÔ∏è |
| **An√°lise** | 24h | 20h | -17% ‚¨áÔ∏è |
| **Testes** | 24h | 26h | +8% ‚¨ÜÔ∏è |
| **Documenta√ß√£o** | 20h | 14h | -30% ‚¨áÔ∏è |

### An√°lise da Varia√ß√£o

**Por que +8% de horas totais?**
- ‚ûï Integra√ß√£o WhatsApp (complexa e nova)
- ‚ûï 3 formul√°rios adicionais de especialistas
- ‚ûï Painel administrativo completo
- ‚ûï Sistema de aprova√ß√£o/notifica√ß√µes
- ‚ûñ Setup reduzido (infra j√° existe)
- ‚ûñ Menos documenta√ß√£o de arquitetura
- ‚ûñ Equipe j√° familiarizada com stack

**Conclus√£o:** Apesar de setup reduzido, complexidade funcional aumenta ligeiramente o total.

---

## üîç Detalhamento: Formul√°rios de Especialistas

### Premissa: 3 Formul√°rios

Cada formul√°rio de especialista segue padr√£o similar mas com campos espec√≠ficos:

| Especialista | Campos Estimados | Valida√ß√µes Espec√≠ficas |
|--------------|-----------------|------------------------|
| **Psic√≥logo** | ~20 campos | Avalia√ß√£o psicol√≥gica, hist√≥rico |
| **Assistente Social** | ~25 campos | Situa√ß√£o socioecon√¥mica, fam√≠lia |
| **Terapeuta Ocupacional** | ~18 campos | Habilidades funcionais, autonomia |

**Total estimado:** ~63 campos distribu√≠dos

### Breakdown de Horas por Formul√°rio

| Atividade | Horas por Form | Total (3 forms) |
|-----------|----------------|-----------------|
| An√°lise de requisitos | 1h | 3h |
| Backend (Models + API) | 3h | 9h |
| Frontend (Interface) | 2h | 6h |
| Valida√ß√µes | 1.5h | 4.5h |
| Testes | 1h | 3h |
| **TOTAL** | **8.5h** | **25.5h** |

**Arredondado:** ~26h para os 3 formul√°rios

**Justificativa:** Campos seguem padr√£o similar (text, select, textarea, date). Ap√≥s primeiro formul√°rio, os demais s√£o mais r√°pidos (reuso de componentes).

---

## üìã Checklist de Valida√ß√£o

Ao final do projeto, validar:

- [ ] Horas reais vs estimadas por disciplina
- [ ] Principais desvios e causas
- [ ] Complexidade WhatsApp API vs estimativa
- [ ] Tempo de desenvolvimento dos formul√°rios
- [ ] Aprendizados para Entrega 3

### Meta de Precis√£o

```
Desvio aceit√°vel: ¬±15% (190h ¬± 28h)
Faixa esperada: 162h - 218h
Com margem inclu√≠da: at√© 218h
```

---

## üîó Refer√™ncias

- [Precifica√ß√£o da Entrega 2](./precificacao-entrega-2.md)
- [Requisitos Detalhados - Entrega 2](./entrega-2-a-definir.md)
- [Estimativa de Horas - Entrega 1](../entrega-1/estimativa-horas-entrega-1.md)
- [Precifica√ß√£o - Entrega 1](../entrega-1/precificacao-projeto.md)
- [ADR-002: Arquitetura T√©cnica](../../adrs/ADR-002-arquitetura-tecnica.md)

---

**√öltima atualiza√ß√£o:** Outubro 2025  
**Respons√°vel:** CodeBoa Software  
**Status:** ‚úÖ Estimativa Completa
